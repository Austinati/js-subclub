{"version":3,"file":"index.cjs","sources":["../src/client.ts"],"sourcesContent":["import type {\n  Post,\n  PostDeleteParams,\n  PostParams,\n  PostUpdateParams,\n} from './post';\n\nexport class Client {\n  private readonly apiUrl = 'https://api.sub.club/public';\n  private readonly apiKey: string;\n\n  constructor(apiKey: string) {\n    this.apiKey = apiKey;\n  }\n\n  // creates a new post on sub.club with the given parameters.\n  async createPost(params: PostParams): Promise<Post> {\n    const response = await fetch(`${this.apiUrl}/post`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${this.apiKey}`,\n      },\n      body: JSON.stringify(params),\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to create post: ${response.statusText}`);\n    }\n\n    return response.json() as Promise<Post>;\n  }\n\n  // edits the given post with the supplied PostUpdateParams.\n  async editPost(params: PostUpdateParams): Promise<Post> {\n    const response = await fetch(`${this.apiUrl}/post/edit`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${this.apiKey}`,\n      },\n      body: JSON.stringify(params),\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to edit post: ${response.statusText}`);\n    }\n\n    return response.json() as Promise<Post>;\n  }\n\n  // deletes a post with the given postID.\n  async deletePost(params: PostDeleteParams): Promise<void> {\n    const response = await fetch(`${this.apiUrl}/post/delete`, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${this.apiKey}`,\n      },\n      body: JSON.stringify(params),\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to delete post: ${response.statusText}`);\n    }\n\n    return;\n  }\n}\n\nexport default Client;\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAOa,MAAM,CAAA;AAIjB,IAAA,WAAA,CAAY,MAAc,EAAA;QAHT,IAAM,CAAA,MAAA,GAAG,6BAA6B,CAAC;AAItD,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;KACtB;;AAGK,IAAA,UAAU,CAAC,MAAkB,EAAA;;YACjC,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,GAAG,IAAI,CAAC,MAAM,CAAA,KAAA,CAAO,EAAE;AAClD,gBAAA,MAAM,EAAE,MAAM;AACd,gBAAA,OAAO,EAAE;AACP,oBAAA,cAAc,EAAE,kBAAkB;AAClC,oBAAA,eAAe,EAAE,CAAA,OAAA,EAAU,IAAI,CAAC,MAAM,CAAE,CAAA;AACzC,iBAAA;AACD,gBAAA,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;AAC7B,aAAA,CAAC,CAAC;AAEH,YAAA,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE;gBAChB,MAAM,IAAI,KAAK,CAAC,CAAA,uBAAA,EAA0B,QAAQ,CAAC,UAAU,CAAE,CAAA,CAAC,CAAC;aAClE;AAED,YAAA,OAAO,QAAQ,CAAC,IAAI,EAAmB,CAAC;SACzC,CAAA,CAAA;AAAA,KAAA;;AAGK,IAAA,QAAQ,CAAC,MAAwB,EAAA;;YACrC,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,GAAG,IAAI,CAAC,MAAM,CAAA,UAAA,CAAY,EAAE;AACvD,gBAAA,MAAM,EAAE,KAAK;AACb,gBAAA,OAAO,EAAE;AACP,oBAAA,cAAc,EAAE,kBAAkB;AAClC,oBAAA,eAAe,EAAE,CAAA,OAAA,EAAU,IAAI,CAAC,MAAM,CAAE,CAAA;AACzC,iBAAA;AACD,gBAAA,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;AAC7B,aAAA,CAAC,CAAC;AAEH,YAAA,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE;gBAChB,MAAM,IAAI,KAAK,CAAC,CAAA,qBAAA,EAAwB,QAAQ,CAAC,UAAU,CAAE,CAAA,CAAC,CAAC;aAChE;AAED,YAAA,OAAO,QAAQ,CAAC,IAAI,EAAmB,CAAC;SACzC,CAAA,CAAA;AAAA,KAAA;;AAGK,IAAA,UAAU,CAAC,MAAwB,EAAA;;YACvC,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,GAAG,IAAI,CAAC,MAAM,CAAA,YAAA,CAAc,EAAE;AACzD,gBAAA,MAAM,EAAE,QAAQ;AAChB,gBAAA,OAAO,EAAE;AACP,oBAAA,cAAc,EAAE,kBAAkB;AAClC,oBAAA,eAAe,EAAE,CAAA,OAAA,EAAU,IAAI,CAAC,MAAM,CAAE,CAAA;AACzC,iBAAA;AACD,gBAAA,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;AAC7B,aAAA,CAAC,CAAC;AAEH,YAAA,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE;gBAChB,MAAM,IAAI,KAAK,CAAC,CAAA,uBAAA,EAA0B,QAAQ,CAAC,UAAU,CAAE,CAAA,CAAC,CAAC;aAClE;YAED,OAAO;SACR,CAAA,CAAA;AAAA,KAAA;AACF;;;;"}